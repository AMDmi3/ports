Index: ftp/curl/Makefile
===================================================================
--- ftp/curl/Makefile	(revision 384340)
+++ ftp/curl/Makefile	(working copy)
@@ -12,13 +12,13 @@
 
 LICENSE=	MIT
 
-OPTIONS_DEFINE=	CA_BUNDLE COOKIES CURL_DEBUG DEBUG DOCS EXAMPLES HTTP2 IDN IPV6 LDAP LDAPS LIBSSH2 PROXY RTMP TLS_SRP
+OPTIONS_DEFINE=	CA_BUNDLE COOKIES CURL_DEBUG DEBUG DOCS EXAMPLES GSSAPI HTTP2 IDN IPV6 LDAP LDAPS LIBSSH2 PROXY RTMP TLS_SRP
 OPTIONS_RADIO=	RESOLV SSL
 OPTIONS_SINGLE=	GSSAPI
 OPTIONS_RADIO_RESOLV=	CARES THREADED_RESOLVER
 OPTIONS_RADIO_SSL=	GNUTLS NSS OPENSSL POLARSSL
-OPTIONS_SINGLE_GSSAPI=	GSSAPI_BASE GSSAPI_HEIMDAL GSSAPI_MIT GSSAPI_NONE
-OPTIONS_DEFAULT=CA_BUNDLE COOKIES GSSAPI_BASE IPV6 OPENSSL PROXY RESOLV THREADED_RESOLVER SSL TLS_SRP
+OPTIONS_SINGLE_GSSAPI=	GSSAPI_BASE GSSAPI_HEIMDAL GSSAPI_MIT
+OPTIONS_DEFAULT=CA_BUNDLE COOKIES GSSAPI GSSAPI_BASE IPV6 OPENSSL PROXY RESOLV THREADED_RESOLVER SSL TLS_SRP
 CA_BUNDLE_DESC=	Install CA bundle for OpenSSL
 COOKIES_DESC=	Cookies support
 CURL_DEBUG_DESC=cURL debug memory tracking
@@ -25,7 +25,6 @@
 GSSAPI_BASE_DESC=	GSSAPI support via base system
 GSSAPI_HEIMDAL_DESC=	GSSAPI support via security/heimdal
 GSSAPI_MIT_DESC=	GSSAPI support via security/krb5
-GSSAPI_NONE_DESC=	Disable GSSAPI support
 LIBSSH2_DESC=	SCP/SFTP support via libssh2
 RESOLV_DESC=	DNS resolving options
 THREADED_RESOLVER_DESC=	Threaded DNS resolver
@@ -77,22 +76,6 @@
 GNUTLS_CONFIGURE_OFF=	--without-gnutls
 GNUTLS_CONFIGURE_ON=	--with-gnutls=${LOCALBASE}
 GNUTLS_LIB_DEPENDS=	libgnutls.so:${PORTSDIR}/security/gnutls
-GSSAPI_BASE_CONFIGURE_ON=	--with-gssapi=${GSSAPIBASEDIR} ${GSSAPI_CONFIGURE_ARGS}
-GSSAPI_BASE_CPPFLAGS=	${GSSAPICPPFLAGS}
-GSSAPI_BASE_LDFLAGS=	${GSSAPILDFLAGS}
-GSSAPI_BASE_LIBS=	${GSSAPILIBS}
-GSSAPI_BASE_USES=	gssapi
-GSSAPI_HEIMDAL_CONFIGURE_ON=	--with-gssapi=${GSSAPIBASEDIR} ${GSSAPI_CONFIGURE_ARGS}
-GSSAPI_HEIMDAL_CPPFLAGS=${GSSAPICPPFLAGS}
-GSSAPI_HEIMDAL_LDFLAGS=	${GSSAPILDFLAGS}
-GSSAPI_HEIMDAL_LIBS=	${GSSAPILIBS}
-GSSAPI_HEIMDAL_USES=	gssapi:heimdal
-GSSAPI_MIT_CONFIGURE_ON=	--with-gssapi=${GSSAPIBASEDIR} ${GSSAPI_CONFIGURE_ARGS}
-GSSAPI_MIT_CPPFLAGS=	${GSSAPICPPFLAGS}
-GSSAPI_MIT_LDFLAGS=	${GSSAPILDFLAGS}
-GSSAPI_MIT_LIBS=	${GSSAPILIBS}
-GSSAPI_MIT_USES=	gssapi:mit
-GSSAPI_NONE_CONFIGURE_ON=	--without-gssapi
 HTTP2_BUILD_DEPENDS=	nghttp2>=0.6.0:${PORTSDIR}/www/nghttp2
 HTTP2_CONFIGURE_OFF=	--without-nghttp2
 HTTP2_CONFIGURE_ON=	--with-nghttp2=${LOCALBASE}
@@ -147,6 +130,21 @@
 IGNORE=		only supports TLS-SRP with either OpenSSL or GnuTLS
 .endif
 
+.if ${PORT_OPTIONS:MGSSAPI}
+CONFIGURE_ARGS+=	--with-gssapi=${GSSAPIBASEDIR} ${GSSAPI_CONFIGURE_ARGS}
+.if ${PORT_OPTIONS:MGSSAPI_BASE}
+USES+=	gssapi
+.endif
+.if ${PORT_OPTIONS:MGSSAPI_MIT}
+USES+=	gssapi:mit
+.endif
+.if ${PORT_OPTIONS:MGSSAPI_HEIMDAL}
+USES+=	gssapi:heimdal
+.endif
+.else
+CONFIGURE_ARGS+=--without-gssapi
+.endif
+
 .if !${PORT_OPTIONS:MLDAP} && ${PORT_OPTIONS:MLDAPS}
 IGNORE=		only supports LDAPS with LDAP
 .endif
@@ -159,14 +157,13 @@
 IGNORE=		only supports LIBSSH2 with OpenSSL
 .endif
 
-.if ${PORT_OPTIONS:MOPENSSL} && defined(OPENSSL_PORT) && ${OPENSSL_PORT} == "security/libressl"
-.if ${PORT_OPTIONS:MGSSAPI_BASE}
+.if ${PORT_OPTIONS:MOPENSSL} && defined(OPENSSL_PORT) && ${PORT_OPTIONS:MGSSAPI_BASE}
 IGNORE=		with GSSAPI_BASE, configure failed to detect OpenSSL/LibreSSL from ports and link against base OpenSSL
 .endif
-.if ${PORT_OPTIONS:MTLS_SRP}
+
+.if ${PORT_OPTIONS:MTLS_SRP} && "${OPENSSL_PORT}" == "security/libressl"
 IGNORE=		unsupported TLS-SRP in LibreSSL
 .endif
-.endif
 
 post-patch:
 	@${REINPLACE_CMD} -e '/^SUBDIRS = / s|$$| docs|; /^DIST_SUBDIRS = / s| docs||; /cd docs &&/d' ${WRKSRC}/Makefile.in
